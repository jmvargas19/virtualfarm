<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>
      Finca Virtual
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <form [formGroup]="authForm" (ngSubmit)="signup(authForm.value)">
    <ion-list>
        <ion-item [ngClass]="{'error-border':!authForm.controls.userName.valid && authForm.controls.userName.touched}">
            <ion-label stacked> Nombre de usuario: </ion-label>
            <ion-input formControlName="userName" type="text" placeholder="userName" [(ngModel)]="userName" name="userName"></ion-input>
          </ion-item>
          <ion-item *ngIf="authForm.controls.userName.hasError('required') && authForm.controls.userName.touched">
            <p>El nombre de usuario es requerido</p>
          </ion-item>      
          <ion-item *ngIf="authForm.controls.userName.hasError('minlength') && authForm.controls.userName.touched">
            <p>Minimo 6 caracteres</p>
          </ion-item>
          <ion-item *ngIf="authForm.controls.userName.hasError('maxlength') && authForm.controls.userName.touched">
            <p>Maximo 30 caracteres</p>
          </ion-item>
      <ion-item [ngClass]="{'error-border':!authForm.controls.name1.valid && authForm.controls.name1.touched}">
        <ion-label stacked> Primer Nombre: </ion-label>
        <ion-input formControlName="name1" type="text" placeholder="name1" [(ngModel)]="name1" name="name1"></ion-input>
      </ion-item>
      <ion-item *ngIf="authForm.controls.name1.hasError('required') && authForm.controls.name1.touched">
        <p>El primer nombre es requerido</p>
      </ion-item>
      <ion-item *ngIf="authForm.controls.name1.hasError('pattern') && authForm.controls.name1.touched">
        <p>No se permiten caracteres especiales</p>
      </ion-item>
      
      <ion-item [ngClass]="{'error-border':!authForm.controls.name2.valid && authForm.controls.name2.touched}">
        <ion-label stacked> Nombre 2: </ion-label>
        <ion-input formControlName="name2" type="text" placeholder="name2" [(ngModel)]="name2" name="name2"></ion-input>
      </ion-item>
      <ion-item *ngIf="authForm.controls.name2.hasError('pattern') && authForm.controls.name2.touched">
        <p>No se permiten caracteres especiales</p>
      </ion-item>
      
      <ion-item [ngClass]="{'error-border':!authForm.controls.surname1.valid && authForm.controls.surname1.touched}">
        <ion-label stacked> Primer Apellido: </ion-label>
        <ion-input formControlName="surname1" type="text" placeholder="surname1" [(ngModel)]="surname1" name="surname1"></ion-input>
      </ion-item>
      <ion-item *ngIf="authForm.controls.surname1.hasError('required') && authForm.controls.surname1.touched">
        <p>El primer apellido es requerido</p>
      </ion-item>
      <ion-item *ngIf="authForm.controls.surname1.hasError('pattern') && authForm.controls.surname1.touched">
        <p>No se permiten caracteres especiales</p>
      </ion-item>
      
      <ion-item [ngClass]="{'error-border':!authForm.controls.surname2.valid && authForm.controls.surname2.touched}">
        <ion-label stacked> Segundo Apellido: </ion-label>
        <ion-input formControlName="surname2" type="text" placeholder="surname2" [(ngModel)]="surname2" name="surname2"></ion-input>
      </ion-item>
      <ion-item *ngIf="authForm.controls.surname2.hasError('pattern') && authForm.controls.surname2.touched">
        <p>No se permiten caracteres especiales</p>
      </ion-item>

      <ion-item [ngClass]="{'error-border':!authForm.controls.cellphone.valid && authForm.controls.cellphone.touched}">
        <ion-label stacked> Celular: </ion-label>
        <ion-input formControlName="cellphone" type="text" placeholder="cellphone" [(ngModel)]="cellphone" name="cellphone"></ion-input>
      </ion-item>
      <ion-item *ngIf="authForm.controls.cellphone.hasError('required') && authForm.controls.cellphone.touched">
        <p>El celular es requerido</p>
      </ion-item>

      <ion-item [ngClass]="{'error-border':!authForm.controls.address.valid && authForm.controls.address.touched}">
        <ion-label stacked> Direccion: </ion-label>
        <ion-input formControlName="address" type="text" placeholder="address" [(ngModel)]="address" name="address"></ion-input>
      </ion-item>
      <ion-item *ngIf="authForm.controls.address.hasError('required') && authForm.controls.address.touched">
        <p>La direcci칩n es requerida</p>
      </ion-item>

      <ion-item [ngClass]="{'error-border':!authForm.controls.departmentId.valid && authForm.controls.departmentId.touched}">
        <ion-label stacked> Departamento: </ion-label>
        <ion-select formControlName="departmentId" [(ngModel)]="departmentId" name="departmentId" (ionChange)="getTowns()">
          <ion-option *ngFor="let item of departments" [value]="item._id">{{item.name}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item *ngIf="authForm.controls.departmentId.hasError('required') && authForm.controls.departmentId.touched">
        <p>El departamento es requerido</p>
      </ion-item>

      <ion-item [ngClass]="{'error-border':!authForm.controls.townId.valid && authForm.controls.townId.touched}">
        <ion-label stacked> Municipio: </ion-label>
        <ion-select formControlName="townId" [(ngModel)]="townId" name="townId">
          <ion-option *ngFor="let item of towns" [value]="item._id">{{item.name}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item *ngIf="authForm.controls.townId.hasError('required') && authForm.controls.townId.touched">
        <p>El municipio es requerido</p>
      </ion-item>

      <ion-item [ngClass]="{'error-border':!authForm.controls.email.valid && authForm.controls.email.touched}">
        <ion-label stacked> Correo Electr칩nico: </ion-label>
        <ion-input formControlName="email" type="text" placeholder="email" [(ngModel)]="email" name="email"></ion-input>
      </ion-item>
      <ion-item *ngIf="authForm.controls.email.hasError('required') && authForm.controls.email.touched">
        <p>El correo es requerido</p>
      </ion-item>      
      <ion-item *ngIf="authForm.controls.email.hasError('minlength') && authForm.controls.email.touched">
        <p>Minimo 8 caracteres</p>
      </ion-item>
      <ion-item *ngIf="authForm.controls.email.hasError('maxlength') && authForm.controls.email.touched">
        <p>Maximo 30 caracteres</p>
      </ion-item>
    
      <ion-item [ngClass]="{'error-border':!authForm.controls.password.valid && authForm.controls.password.touched}">
        <ion-label stacked> Contrase침a: </ion-label>
        <ion-input formControlName="password" type="password" placeholder="password" [(ngModel)]="password" name="password"></ion-input>
      </ion-item>
      <ion-item *ngIf="authForm.controls.password.hasError('required') && authForm.controls.password.touched">
        <p>La contrase침a es requerida</p>
      </ion-item>
      <ion-item *ngIf="authForm.controls.password.hasError('minlength') && authForm.controls.password.touched">
        <p>Minimo 6 caracteres</p>
      </ion-item>
    </ion-list>
    <div padding>
      <button ion-button block type="submit" [disabled]="!authForm.valid"> Guardar </button>
    </div>
  </form>
</ion-content>
